(()=>{var e={};e.id=683,e.ids=[683],e.modules={2320:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>u});var r=s(60687),a=s(43210),l=s(47283),i=s(64398),o=s(13964),n=s(11860),c=s(37590);let d=e=>{if(!e)return"No date specified";let t=new Date(e);return isNaN(t.getTime())?"Invalid date":t.toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"})};function u(){let[e,t]=(0,a.useState)({email:"",subscription:{currentPeriodEnd:new Date(Date.now()+2592e6).toISOString()},paymentMethod:{last4:"4242"}}),{currentSubscription:s,loading:u,error:p,isPro:h,fetchSubscription:x,createCheckoutSession:b,cancelSubscription:g,updatePaymentMethod:y,clearError:f}=(0,l.S)(),v="function"==typeof h&&h(),[j,N]=(0,a.useState)(!1),[w,S]=(0,a.useState)(!1),[P,C]=(0,a.useState)(!1),[k,A]=(0,a.useState)(!1),[U,I]=(0,a.useState)({cardNumber:"",expiryDate:"",cvc:""}),E=async()=>{if(!e.email)return void c.Ay.error("User email not found. Please log in again.");if(!b)return void c.Ay.error("Payment service unavailable. Please try again later.");A(!0);try{let t=await b({type:"subscription",email:e.email,successUrl:`${window.location.origin}/dashboard/subscription?success=true`,cancelUrl:`${window.location.origin}/dashboard/subscription?canceled=true`});if(t?.checkoutUrl){c.Ay.success("Redirecting to payment..."),window.location.href=t.checkoutUrl;return}if(t?.success&&t?.url){c.Ay.success("Redirecting to payment..."),window.location.href=t.url;return}if("string"==typeof t&&t.includes("checkout.stripe.com")){c.Ay.success("Redirecting to payment..."),window.location.href=t;return}console.error("No checkout URL found in response:",t),c.Ay.error(t?.message||t?.error||"Unable to create payment session. Please try again.")}catch(e){console.error("Upgrade failed with error:",e),c.Ay.error("Failed to start upgrade process. Please try again.")}finally{A(!1),N(!1)}},F=async()=>{if(!e.email)return void c.Ay.error("User email not found. Please log in again.");if(!g)return void c.Ay.error("Service unavailable. Please try again later.");A(!0);try{let t=await g({email:e.email});t?.success?(S(!1),c.Ay.success("Subscription cancelled successfully. You'll retain access until your billing period ends."),x&&await x()):t?.error==="Subscription not found."?(c.Ay.error("No active subscription found. Your account is already on the free plan."),S(!1),x&&await x()):c.Ay.error(t?.message||t?.error||"Failed to cancel subscription")}catch(e){console.error("Cancel failed:",e),c.Ay.error("Failed to cancel subscription. Please try again.")}finally{A(!1)}},D=async s=>{if(s.preventDefault(),!e.email)return void c.Ay.error("User email not found. Please log in again.");let r=U.cardNumber.replace(/\s/g,"");if(!r||!U.expiryDate||!U.cvc)return void c.Ay.error("Please fill in all payment details.");if(r.length<13)return void c.Ay.error("Please enter a valid card number.");if(U.cvc.length<3)return void c.Ay.error("Please enter a valid CVC.");if(!y)return void c.Ay.error("Service unavailable. Please try again later.");A(!0);try{let s=await y({email:e.email,cardNumber:r,expiryDate:U.expiryDate,cvc:U.cvc});s?.success?(C(!1),c.Ay.success("Payment method updated successfully!"),t(e=>({...e,paymentMethod:{last4:r.slice(-4)}})),I({cardNumber:"",expiryDate:"",cvc:""})):c.Ay.error(s?.message||s?.error||"Failed to update payment method")}catch(e){console.error("Update payment failed:",e),c.Ay.error("Failed to update payment method. Please try again.")}finally{A(!1)}},O=(e,t)=>{let s=t;if("cardNumber"===e){let e=t.replace(/\D/g,"");if(s=e.replace(/(\d{4})/g,"$1 ").trim(),e.length>16)return}if("expiryDate"===e){let e=t.replace(/\D/g,"");if(s=e.length>=2?e.replace(/(\d{2})(\d)/,"$1/$2"):e,e.length>4)return}"cvc"===e&&(s=t.replace(/\D/g,"")).length>4||I(t=>({...t,[e]:s}))};return(0,r.jsxs)("div",{className:"min-h-screen bg-gray-50",children:[(0,r.jsxs)("div",{className:"max-w-5xl mx-auto p-6",children:[(0,r.jsxs)("div",{className:"mb-6",children:[(0,r.jsx)("h1",{className:"text-2xl font-semibold text-slate-800",children:"Subscription"}),(0,r.jsx)("p",{className:"text-sm text-slate-600",children:"Manage billing and plan settings for your account."})]}),u&&(0,r.jsx)("div",{className:"bg-white border border-slate-200 rounded-lg p-8 text-center",children:(0,r.jsxs)("div",{className:"inline-flex items-center gap-2",children:[(0,r.jsx)("div",{className:"w-4 h-4 border-2 border-slate-300 border-t-slate-600 rounded-full animate-spin"}),(0,r.jsx)("span",{className:"text-slate-600",children:"Loading subscription data..."})]})}),!u&&(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-6",children:[(0,r.jsxs)("div",{className:"col-span-2 bg-white border border-slate-200 rounded-lg p-4",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsxs)("div",{className:"flex items-center gap-4",children:[(0,r.jsx)("div",{className:"p-3 rounded-md",style:{backgroundColor:"#5c3aec20"},children:(0,r.jsx)(i.A,{className:"w-5 h-5",style:{color:"#5c3aec"}})}),(0,r.jsxs)("div",{children:[(0,r.jsx)("div",{className:"text-sm text-slate-500",children:"Current Plan"}),(0,r.jsx)("div",{className:"text-lg font-bold text-slate-900",children:v?"Pro":"Free"})]})]}),(0,r.jsxs)("div",{className:"text-right",children:[(0,r.jsx)("div",{className:"text-xl font-extrabold",children:v?"$4.99":"$0"}),(0,r.jsx)("div",{className:"text-sm text-slate-500",children:"per month"})]})]}),(0,r.jsx)("div",{className:"mt-4 text-sm text-slate-600",children:v?(0,r.jsxs)(r.Fragment,{children:["Next billing: ",(0,r.jsx)("strong",{className:"text-slate-900",children:d(s?.currentPeriodEnd||e.subscription.currentPeriodEnd)})]}):(0,r.jsx)(r.Fragment,{children:"Upgrade to Pro for unlimited access to all features."})})]}),(0,r.jsxs)("div",{className:"bg-white border border-slate-200 rounded-lg p-4 flex flex-col justify-between",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("div",{className:"text-sm text-slate-500",children:"Payment Method"}),(0,r.jsx)("div",{className:"font-medium text-slate-900",children:v?`VISA •••• ${s?.paymentMethod?.last4||e.paymentMethod.last4}`:"No payment method"})]}),v&&(0,r.jsx)("div",{className:"mt-4",children:(0,r.jsx)("button",{onClick:()=>C(!0),className:"w-full px-4 py-2 bg-white border border-slate-200 rounded-md text-sm hover:bg-slate-50 disabled:opacity-50",disabled:k,children:"Update"})})]})]}),(0,r.jsxs)("div",{className:"grid md:grid-cols-2 gap-6",children:[(0,r.jsxs)("div",{className:`bg-white border ${!v?"border-slate-300 ring-2 ring-slate-200":"border-slate-200"} rounded-lg p-6`,children:[(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("h3",{className:"text-lg font-semibold text-slate-900",children:"Free"}),(0,r.jsx)("p",{className:"text-sm text-slate-500",children:"Basic access to explore"})]}),(0,r.jsx)("div",{className:"text-2xl font-bold text-slate-900",children:"$0"})]}),(0,r.jsxs)("ul",{className:"mt-4 space-y-2 text-sm text-slate-600",children:[(0,r.jsxs)("li",{className:"flex items-start gap-3",children:[(0,r.jsx)(o.A,{className:"w-4 h-4 text-green-600 mt-1"}),"Basic access to job listings"]}),(0,r.jsxs)("li",{className:"flex items-start gap-3",children:[(0,r.jsx)(o.A,{className:"w-4 h-4 text-green-600 mt-1"}),"View investor profiles (limited)"]}),(0,r.jsxs)("li",{className:"flex items-start gap-3",children:[(0,r.jsx)(o.A,{className:"w-4 h-4 text-green-600 mt-1"}),"Browse scholarships"]}),(0,r.jsxs)("li",{className:"flex items-start gap-3 opacity-60",children:[(0,r.jsx)(n.A,{className:"w-4 h-4 text-slate-400 mt-1"}),"Limited to 3 items per category"]})]}),(0,r.jsx)("div",{className:"mt-6",children:(0,r.jsx)("button",{disabled:!0,className:`w-full px-4 py-2 rounded-md font-medium ${!v?"bg-slate-100 text-slate-500 cursor-not-allowed":"bg-white border hover:bg-slate-50"}`,children:v?"Free Plan":"Current Plan"})})]}),(0,r.jsxs)("div",{className:`bg-white border rounded-lg p-6 ${v?"ring-2 shadow-md":""}`,style:v?{borderColor:"#5c3aec",ringColor:"#5c3aec30"}:{borderColor:"#e2e8f0"},children:[(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("h3",{className:"text-lg font-semibold text-slate-900",children:"Pro"}),(0,r.jsx)("p",{className:"text-sm text-slate-500",children:"Full access to everything"})]}),(0,r.jsx)("div",{className:"text-2xl font-bold text-slate-900",children:"$4.99"})]}),(0,r.jsxs)("ul",{className:"mt-4 space-y-2 text-sm text-slate-600",children:[(0,r.jsxs)("li",{className:"flex items-start gap-3",children:[(0,r.jsx)(o.A,{className:"w-4 h-4 text-green-600 mt-1"}),"Unlimited access to all jobs"]}),(0,r.jsxs)("li",{className:"flex items-start gap-3",children:[(0,r.jsx)(o.A,{className:"w-4 h-4 text-green-600 mt-1"}),"Full investor database access"]}),(0,r.jsxs)("li",{className:"flex items-start gap-3",children:[(0,r.jsx)(o.A,{className:"w-4 h-4 text-green-600 mt-1"}),"All scholarship opportunities"]}),(0,r.jsxs)("li",{className:"flex items-start gap-3",children:[(0,r.jsx)(o.A,{className:"w-4 h-4 text-green-600 mt-1"}),"Complete talent pool visibility"]}),(0,r.jsxs)("li",{className:"flex items-start gap-3",children:[(0,r.jsx)(o.A,{className:"w-4 h-4 text-green-600 mt-1"}),"Priority support"]})]}),(0,r.jsx)("div",{className:"mt-6",children:(0,r.jsx)("button",{onClick:()=>v&&s?S(!0):N(!0),disabled:k||!e.email,className:`w-full px-4 py-2 rounded-md font-medium transition-colors disabled:opacity-50 disabled:cursor-not-allowed text-white ${v&&s?"bg-red-600 hover:bg-red-700":"hover:opacity-90"}`,style:v&&s?{}:{backgroundColor:"#5c3aec"},children:k?(0,r.jsxs)("div",{className:"flex items-center justify-center gap-2",children:[(0,r.jsx)("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin"}),"Processing..."]}):v&&s?"Cancel Subscription":"Upgrade to Pro"})})]})]})]})]}),j&&(0,r.jsx)(m,{title:"Upgrade to Pro",onClose:()=>N(!1),children:(0,r.jsxs)("div",{className:"space-y-4 text-sm text-slate-700",children:[(0,r.jsx)("p",{children:"Upgrade to Pro to unlock unlimited access to all features on our platform."}),(0,r.jsxs)("div",{className:"border rounded-md p-3",style:{backgroundColor:"#5c3aec10",borderColor:"#5c3aec30"},children:[(0,r.jsx)("div",{className:"font-medium",style:{color:"#5c3aec"},children:"What you'll get:"}),(0,r.jsxs)("ul",{className:"text-slate-700 text-xs mt-1 space-y-1",children:[(0,r.jsx)("li",{children:"• Unlimited job listings access"}),(0,r.jsx)("li",{children:"• Full investor database"}),(0,r.jsx)("li",{children:"• All scholarship opportunities"}),(0,r.jsx)("li",{children:"• Complete talent pool visibility"}),(0,r.jsx)("li",{children:"• Priority customer support"})]})]}),(0,r.jsxs)("div",{className:"flex gap-3",children:[(0,r.jsx)("button",{onClick:()=>N(!1),disabled:k,className:"flex-1 px-4 py-2 border rounded-md hover:bg-gray-50 disabled:opacity-50",children:"Cancel"}),(0,r.jsx)("button",{onClick:E,disabled:k||!e.email,className:"flex-1 px-4 py-2 text-white rounded-md hover:opacity-90 disabled:opacity-50",style:{backgroundColor:"#5c3aec"},children:k?(0,r.jsxs)("div",{className:"flex items-center justify-center gap-2",children:[(0,r.jsx)("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin"}),"Processing..."]}):"Confirm Upgrade"})]})]})}),w&&(0,r.jsx)(m,{title:"Cancel Subscription",onClose:()=>S(!1),children:(0,r.jsxs)("div",{className:"space-y-4 text-sm text-slate-700",children:[(0,r.jsxs)("div",{className:"bg-red-50 border border-red-200 rounded-md p-3",children:[(0,r.jsx)("div",{className:"font-medium text-red-800",children:"Are you sure?"}),(0,r.jsx)("p",{className:"text-red-700 text-xs mt-1",children:"You will retain access until the end of your billing period, but you'll lose access to Pro features after that."})]}),(0,r.jsxs)("div",{className:"flex gap-3",children:[(0,r.jsx)("button",{onClick:()=>S(!1),disabled:k,className:"flex-1 px-4 py-2 border rounded-md hover:bg-gray-50 disabled:opacity-50",children:"Keep Plan"}),(0,r.jsx)("button",{onClick:F,disabled:k||!e.email,className:"flex-1 px-4 py-2 bg-red-600 text-white rounded-md hover:bg-red-700 disabled:opacity-50",children:k?(0,r.jsxs)("div",{className:"flex items-center justify-center gap-2",children:[(0,r.jsx)("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin"}),"Cancelling..."]}):"Confirm Cancel"})]})]})}),P&&(0,r.jsx)(m,{title:"Update Payment Method",onClose:()=>C(!1),children:(0,r.jsxs)("form",{onSubmit:D,className:"space-y-3",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Card Number"}),(0,r.jsx)("input",{type:"text",value:U.cardNumber,onChange:e=>O("cardNumber",e.target.value),placeholder:"1234 5678 9012 3456",className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:border-transparent",style:{"--tw-ring-color":"#5c3aec"},disabled:k})]}),(0,r.jsxs)("div",{className:"grid grid-cols-2 gap-2",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Expiry Date"}),(0,r.jsx)("input",{type:"text",value:U.expiryDate,onChange:e=>O("expiryDate",e.target.value),placeholder:"MM/YY",className:"px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:border-transparent w-full",disabled:k})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"CVC"}),(0,r.jsx)("input",{type:"text",value:U.cvc,onChange:e=>O("cvc",e.target.value),placeholder:"123",className:"px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:border-transparent w-full",disabled:k})]})]}),(0,r.jsxs)("div",{className:"flex gap-3 pt-2",children:[(0,r.jsx)("button",{type:"button",onClick:()=>C(!1),disabled:k,className:"flex-1 px-4 py-2 border rounded-md hover:bg-gray-50 disabled:opacity-50",children:"Cancel"}),(0,r.jsx)("button",{type:"submit",disabled:k,className:"flex-1 px-4 py-2 text-white rounded-md hover:opacity-90 disabled:opacity-50",style:{backgroundColor:"#5c3aec"},children:k?(0,r.jsxs)("div",{className:"flex items-center justify-center gap-2",children:[(0,r.jsx)("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin"}),"Updating..."]}):"Update Payment"})]})]})})]})}let m=({title:e,children:t,onClose:s})=>(0,r.jsx)("div",{className:"fixed inset-0 bg-black/50 z-[60] flex items-center justify-center p-4",children:(0,r.jsxs)("div",{className:"bg-white rounded-lg max-w-lg w-full shadow-xl",children:[(0,r.jsxs)("div",{className:"px-6 py-4 border-b border-slate-200 flex items-center justify-between",children:[(0,r.jsx)("h3",{className:"text-lg font-medium text-slate-900",children:e}),(0,r.jsx)("button",{onClick:s,className:"p-1 rounded-md hover:bg-gray-100 transition-colors",children:(0,r.jsx)(n.A,{className:"w-4 h-4 text-slate-600"})})]}),(0,r.jsx)("div",{className:"p-6",children:t})]})})},3295:e=>{"use strict";e.exports=require("next/dist/server/app-render/after-task-async-storage.external.js")},6810:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>r});let r=(0,s(12907).registerClientReference)(function(){throw Error("Attempted to call the default export of \"C:\\\\Users\\\\RextonItsiah\\\\Documents\\\\GitHub\\\\qwesi-home\\\\app\\\\dashboard\\\\subscription\\\\page.jsx\" from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"C:\\Users\\RextonItsiah\\Documents\\GitHub\\qwesi-home\\app\\dashboard\\subscription\\page.jsx","default")},10846:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},13036:(e,t,s)=>{Promise.resolve().then(s.bind(s,2320))},13964:(e,t,s)=>{"use strict";s.d(t,{A:()=>r});let r=(0,s(62688).A)("check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]])},19121:e=>{"use strict";e.exports=require("next/dist/server/app-render/action-async-storage.external.js")},20913:(e,t,s)=>{"use strict";s.r(t),s.d(t,{GlobalError:()=>i.a,__next_app__:()=>u,pages:()=>d,routeModule:()=>m,tree:()=>c});var r=s(65239),a=s(48088),l=s(88170),i=s.n(l),o=s(30893),n={};for(let e in o)0>["default","tree","pages","GlobalError","__next_app__","routeModule"].indexOf(e)&&(n[e]=()=>o[e]);s.d(t,n);let c={children:["",{children:["dashboard",{children:["subscription",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(s.bind(s,6810)),"C:\\Users\\RextonItsiah\\Documents\\GitHub\\qwesi-home\\app\\dashboard\\subscription\\page.jsx"]}]},{}]},{layout:[()=>Promise.resolve().then(s.bind(s,49927)),"C:\\Users\\RextonItsiah\\Documents\\GitHub\\qwesi-home\\app\\dashboard\\layout.jsx"],metadata:{icon:[async e=>(await Promise.resolve().then(s.bind(s,46055))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}]},{layout:[()=>Promise.resolve().then(s.bind(s,47824)),"C:\\Users\\RextonItsiah\\Documents\\GitHub\\qwesi-home\\app\\layout.jsx"],"not-found":[()=>Promise.resolve().then(s.t.bind(s,57398,23)),"next/dist/client/components/not-found-error"],forbidden:[()=>Promise.resolve().then(s.t.bind(s,89999,23)),"next/dist/client/components/forbidden-error"],unauthorized:[()=>Promise.resolve().then(s.t.bind(s,65284,23)),"next/dist/client/components/unauthorized-error"],metadata:{icon:[async e=>(await Promise.resolve().then(s.bind(s,46055))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}]}.children,d=["C:\\Users\\RextonItsiah\\Documents\\GitHub\\qwesi-home\\app\\dashboard\\subscription\\page.jsx"],u={require:s,loadChunk:()=>Promise.resolve()},m=new r.AppPageRouteModule({definition:{kind:a.RouteKind.APP_PAGE,page:"/dashboard/subscription/page",pathname:"/dashboard/subscription",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:c}})},26188:(e,t,s)=>{Promise.resolve().then(s.bind(s,6810))},29294:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-async-storage.external.js")},33873:e=>{"use strict";e.exports=require("path")},47283:(e,t,s)=>{"use strict";s.d(t,{S:()=>i});var r=s(26787),a=s(59350);s(57670);var l=s(72384);let i=(0,r.v)((0,a.Zr)((e,t)=>({currentSubscription:null,availablePlans:[],loading:!1,error:null,getCurrentSubscription:()=>t().currentSubscription,getAvailablePlans:()=>t().availablePlans,isLoading:()=>t().loading,getError:()=>t().error,isSubscribed:()=>t().currentSubscription?.status==="active",isPro:()=>t().currentSubscription?.status==="active",fetchSubscription:async()=>{e({loading:!0,error:null});try{let t=JSON.parse(localStorage.getItem("auth-store")||"{}"),s=t.state?.token||"",r=await fetch(l.Q.USER_DETAILS,{method:"GET",headers:{Authorization:`Bearer ${s}`,"Content-Type":"application/json"}}),a=await r.json();if(r.ok&&a.success){let t=a.user?.subscription||null;return e({currentSubscription:t}),{success:!0,subscription:t}}}catch(s){console.error("Fetch subscription error:",s);let t="Failed to fetch subscription data";return e({error:t}),{success:!1,error:t}}finally{e({loading:!1})}},fetchPlans:async()=>{e({loading:!0,error:null});try{let t=JSON.parse(localStorage.getItem("auth-store")||"{}"),s=t.state?.token||"",r=await fetch(`${l.Q.BASE_URL}api/subscription/plans`,{method:"GET",headers:{Authorization:`Bearer ${s}`,"Content-Type":"application/json"}}),a=await r.json();if(r.ok&&a.success&&a.plans)return e({availablePlans:a.plans}),{success:!0,plans:a.plans};{let t=a.message||"Failed to fetch plans";return e({error:t}),{success:!1,error:t}}}catch(s){console.error("Fetch plans error:",s);let t="Failed to fetch subscription plans";return e({error:t}),{success:!1,error:t}}finally{e({loading:!1})}},createCheckoutSession:async t=>{e({loading:!0,error:null});try{let s=JSON.parse(localStorage.getItem("auth-store")||"{}"),r=s.state?.token||"";console.log("Making API call to:",l.Q.CREATE_CHECKOUT_SESSION),console.log("With data:",t),console.log("With token:",r?"Present":"Missing");let a=await fetch(l.Q.CREATE_CHECKOUT_SESSION,{method:"POST",headers:{Authorization:`Bearer ${r}`,"Content-Type":"application/json"},body:JSON.stringify(t)});console.log("Response status:",a.status),console.log("Response ok:",a.ok);let i=await a.json();if(console.log("API Response:",i),a.ok){if(i.success&&i.checkoutUrl)return console.log("Success case 1: success + checkoutUrl"),{success:!0,checkoutUrl:i.checkoutUrl};else if(i.checkoutUrl)return console.log("Success case 2: checkoutUrl only"),{success:!0,checkoutUrl:i.checkoutUrl};else if(i.url)return console.log("Success case 3: url property"),{success:!0,checkoutUrl:i.url};else if(!1===i.success){console.log("API returned success: false");let t=i.error||i.message||"Failed to create checkout session";return e({error:t}),{success:!1,error:t}}}console.log("No valid checkout URL found in response");let o=i.error||i.message||`HTTP ${a.status}: Failed to create checkout session`;return e({error:o}),{success:!1,error:o}}catch(s){console.error("Create checkout session error:",s);let t="Network error: Failed to create checkout session";return e({error:t}),{success:!1,error:t}}finally{e({loading:!1})}},createSubscription:async t=>{e({loading:!0,error:null});try{let s=JSON.parse(localStorage.getItem("auth-store")||"{}"),r=s.state?.token||"",a=await fetch(`${l.Q.BASE_URL}api/subscription`,{method:"POST",headers:{Authorization:`Bearer ${r}`,"Content-Type":"application/json"},body:JSON.stringify(t)}),i=await a.json();if(a.ok&&i.success&&i.subscription)return e({currentSubscription:i.subscription}),{success:!0,subscription:i.subscription};{let t=i.message||"Failed to create subscription";return e({error:t}),{success:!1,error:t}}}catch(s){console.error("Create subscription error:",s);let t="Failed to create subscription";return e({error:t}),{success:!1,error:t}}finally{e({loading:!1})}},cancelSubscription:async s=>{e({loading:!0,error:null});try{let r=JSON.parse(localStorage.getItem("auth-store")||"{}"),a=r.state?.token||"",i=await fetch(l.Q.CANCEL_SUBSCRIPTION,{method:"POST",headers:{Authorization:`Bearer ${a}`,"Content-Type":"application/json"},body:JSON.stringify(s)}),o=await i.json();if(i.ok&&o.success){let s=t().currentSubscription;return s&&e({currentSubscription:{...s,status:"canceled",cancelAtPeriodEnd:!0}}),{success:!0,message:o.message}}{let t=o.message||"Failed to cancel subscription";return e({error:t}),{success:!1,error:t}}}catch(s){console.error("Cancel subscription error:",s);let t="Failed to cancel subscription";return e({error:t}),{success:!1,error:t}}finally{e({loading:!1})}},updatePaymentMethod:async t=>{e({loading:!0,error:null});try{let s=JSON.parse(localStorage.getItem("auth-store")||"{}"),r=s.state?.token||"",a=await fetch(l.Q.UPDATE_PAYMENT_METHOD,{method:"POST",headers:{Authorization:`Bearer ${r}`,"Content-Type":"application/json"},body:JSON.stringify(t)}),i=await a.json();if(a.ok&&i.success)return{success:!0,message:i.message};{let t=i.message||"Failed to update payment method";return e({error:t}),{success:!1,error:t}}}catch(s){console.error("Update payment method error:",s);let t="Failed to update payment method";return e({error:t}),{success:!1,error:t}}finally{e({loading:!1})}},clearError:()=>{e({error:null})},reset:()=>{e({currentSubscription:null,availablePlans:[],loading:!1,error:null})}}),{name:"subscription-store"}))},59350:(e,t,s)=>{"use strict";s.d(t,{Zr:()=>a});let r=e=>t=>{try{let s=e(t);if(s instanceof Promise)return s;return{then:e=>r(e)(s),catch(e){return this}}}catch(e){return{then(e){return this},catch:t=>r(t)(e)}}},a=(e,t)=>(s,a,l)=>{let i,o={storage:function(e,t){let s;try{s=e()}catch(e){return}return{getItem:e=>{var t;let r=e=>null===e?null:JSON.parse(e,void 0),a=null!=(t=s.getItem(e))?t:null;return a instanceof Promise?a.then(r):r(a)},setItem:(e,t)=>s.setItem(e,JSON.stringify(t,void 0)),removeItem:e=>s.removeItem(e)}}(()=>localStorage),partialize:e=>e,version:0,merge:(e,t)=>({...t,...e}),...t},n=!1,c=new Set,d=new Set,u=o.storage;if(!u)return e((...e)=>{console.warn(`[zustand persist middleware] Unable to update item '${o.name}', the given storage is currently unavailable.`),s(...e)},a,l);let m=()=>{let e=o.partialize({...a()});return u.setItem(o.name,{state:e,version:o.version})},p=l.setState;l.setState=(e,t)=>(p(e,t),m());let h=e((...e)=>(s(...e),m()),a,l);l.getInitialState=()=>h;let x=()=>{var e,t;if(!u)return;n=!1,c.forEach(e=>{var t;return e(null!=(t=a())?t:h)});let l=(null==(t=o.onRehydrateStorage)?void 0:t.call(o,null!=(e=a())?e:h))||void 0;return r(u.getItem.bind(u))(o.name).then(e=>{if(e)if("number"!=typeof e.version||e.version===o.version)return[!1,e.state];else{if(o.migrate){let t=o.migrate(e.state,e.version);return t instanceof Promise?t.then(e=>[!0,e]):[!0,t]}console.error("State loaded from storage couldn't be migrated since no migrate function was provided")}return[!1,void 0]}).then(e=>{var t;let[r,l]=e;if(s(i=o.merge(l,null!=(t=a())?t:h),!0),r)return m()}).then(()=>{null==l||l(i,void 0),i=a(),n=!0,d.forEach(e=>e(i))}).catch(e=>{null==l||l(void 0,e)})};return l.persist={setOptions:e=>{o={...o,...e},e.storage&&(u=e.storage)},clearStorage:()=>{null==u||u.removeItem(o.name)},getOptions:()=>o,rehydrate:()=>x(),hasHydrated:()=>n,onHydrate:e=>(c.add(e),()=>{c.delete(e)}),onFinishHydration:e=>(d.add(e),()=>{d.delete(e)})},o.skipHydration||x(),i||h}},63033:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-unit-async-storage.external.js")},64398:(e,t,s)=>{"use strict";s.d(t,{A:()=>r});let r=(0,s(62688).A)("star",[["path",{d:"M11.525 2.295a.53.53 0 0 1 .95 0l2.31 4.679a2.123 2.123 0 0 0 1.595 1.16l5.166.756a.53.53 0 0 1 .294.904l-3.736 3.638a2.123 2.123 0 0 0-.611 1.878l.882 5.14a.53.53 0 0 1-.771.56l-4.618-2.428a2.122 2.122 0 0 0-1.973 0L6.396 21.01a.53.53 0 0 1-.77-.56l.881-5.139a2.122 2.122 0 0 0-.611-1.879L2.16 9.795a.53.53 0 0 1 .294-.906l5.165-.755a2.122 2.122 0 0 0 1.597-1.16z",key:"r04s7s"}]])},79551:e=>{"use strict";e.exports=require("url")}};var t=require("../../../webpack-runtime.js");t.C(e);var s=e=>t(t.s=e),r=t.X(0,[447,393,885,203,957,515,871],()=>s(20913));module.exports=r})();