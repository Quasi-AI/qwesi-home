(()=>{var e={};e.id=604,e.ids=[604],e.modules={2432:(e,t,s)=>{Promise.resolve().then(s.bind(s,88003))},3295:e=>{"use strict";e.exports=require("next/dist/server/app-render/after-task-async-storage.external.js")},6282:(e,t,s)=>{"use strict";s.d(t,{A:()=>r});var a=s(60687);let r=()=>(0,a.jsx)("div",{className:"flex items-center justify-center h-screen",children:(0,a.jsx)("div",{className:"w-11 h-11 rounded-full border-3 border-gray-300 border-t-green-500 animate-spin"})})},10655:(e,t,s)=>{Promise.resolve().then(s.bind(s,98801))},10846:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},15584:(e,t,s)=>{Promise.resolve().then(s.bind(s,65764))},18406:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>o,metadata:()=>l});var a=s(37413),r=s(65764);let l={title:"Qwesi. - Store Dashboard",description:"Qwesi. - Store Dashboard"};function o({children:e}){return(0,a.jsx)(a.Fragment,{children:(0,a.jsx)(r.default,{children:e})})}},19121:e=>{"use strict";e.exports=require("next/dist/server/app-render/action-async-storage.external.js")},29294:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-async-storage.external.js")},32192:(e,t,s)=>{"use strict";s.d(t,{A:()=>a});let a=(0,s(62688).A)("house",[["path",{d:"M15 21v-8a1 1 0 0 0-1-1h-4a1 1 0 0 0-1 1v8",key:"5wwlr5"}],["path",{d:"M3 10a2 2 0 0 1 .709-1.528l7-6a2 2 0 0 1 2.582 0l7 6A2 2 0 0 1 21 10v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"r6nss1"}]])},33873:e=>{"use strict";e.exports=require("path")},47607:(e,t,s)=>{Promise.resolve().then(s.bind(s,48160))},48160:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>d});var a=s(60687),r=s(43210),l=s(44867),o=s(37590);let n=(0,s(62688).A)("delete",[["path",{d:"M10 5a2 2 0 0 0-1.344.519l-6.328 5.74a1 1 0 0 0 0 1.481l6.328 5.741A2 2 0 0 0 10 19h10a2 2 0 0 0 2-2V7a2 2 0 0 0-2-2z",key:"1yo7s0"}],["path",{d:"m12 9 6 6",key:"anjzzh"}],["path",{d:"m18 9-6 6",key:"1fp51s"}]]),i="https://dark-caldron-448714-u5.uc.r.appspot.com/api";function d(){let[e,t]=(0,r.useState)([]),[s,d]=(0,r.useState)({code:"",description:"",discountType:"percent",discountValue:"",validFrom:null,validUntil:new Date(Date.now()+2592e6),minOrderTotal:0,usageLimit:null,isActive:!0}),c=async a=>{a.preventDefault();try{let a={...s,code:s.code.toUpperCase(),discountValue:parseFloat(s.discountValue),minOrderTotal:parseFloat(s.minOrderTotal)||0,usageLimit:s.usageLimit?parseInt(s.usageLimit):null},r=await fetch(`${i}/coupons`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(a)});if(r.ok){let s=await r.json();t([...e,s]),d({code:"",description:"",discountType:"percent",discountValue:"",validFrom:null,validUntil:new Date(Date.now()+2592e6),minOrderTotal:0,usageLimit:null,isActive:!0}),o.Ay.success("Coupon added successfully!")}else{let e=await r.json();throw Error(e.message||"Failed to add coupon")}}catch(e){console.error("Error adding coupon:",e),o.Ay.error(e.message||"Failed to add coupon")}},u=e=>{let{name:t,value:a,type:r,checked:l}=e.target;d({...s,[t]:"checkbox"===r?l:a})},p=async s=>{try{if((await fetch(`${i}/coupons/${s}`,{method:"DELETE"})).ok)t(e.filter(e=>e.code!==s)),o.Ay.success("Coupon deleted successfully!");else throw Error("Failed to delete coupon")}catch(e){console.error("Error deleting coupon:",e),o.Ay.error("Failed to delete coupon")}};return(0,a.jsxs)("div",{className:"text-slate-500 mb-40",children:[(0,a.jsxs)("form",{onSubmit:e=>o.Ay.promise(c(e),{loading:"Adding coupon..."}),className:"max-w-sm text-sm",children:[(0,a.jsxs)("h2",{className:"text-2xl",children:["Add ",(0,a.jsx)("span",{className:"text-slate-800 font-medium",children:"Coupons"})]}),(0,a.jsxs)("div",{className:"flex gap-2 max-sm:flex-col mt-2",children:[(0,a.jsx)("input",{type:"text",placeholder:"Coupon Code",className:"w-full mt-2 p-2 border border-slate-200 outline-slate-400 rounded-md",name:"code",value:s.code,onChange:u,required:!0}),(0,a.jsxs)("select",{className:"w-full mt-2 p-2 border border-slate-200 outline-slate-400 rounded-md",name:"discountType",value:s.discountType,onChange:u,required:!0,children:[(0,a.jsx)("option",{value:"percent",children:"Percentage"}),(0,a.jsx)("option",{value:"amount",children:"Fixed Amount"})]})]}),(0,a.jsx)("input",{type:"number",placeholder:`Discount ${"percent"===s.discountType?"(%)":"($)"}`,min:0,max:"percent"===s.discountType?100:void 0,className:"w-full mt-2 p-2 border border-slate-200 outline-slate-400 rounded-md",name:"discountValue",value:s.discountValue,onChange:u,required:!0}),(0,a.jsx)("input",{type:"text",placeholder:"Coupon Description",className:"w-full mt-2 p-2 border border-slate-200 outline-slate-400 rounded-md",name:"description",value:s.description,onChange:u,required:!0}),(0,a.jsx)("input",{type:"number",placeholder:"Minimum Order Total ($)",min:0,className:"w-full mt-2 p-2 border border-slate-200 outline-slate-400 rounded-md",name:"minOrderTotal",value:s.minOrderTotal,onChange:u}),(0,a.jsx)("input",{type:"number",placeholder:"Usage Limit (leave empty for unlimited)",min:1,className:"w-full mt-2 p-2 border border-slate-200 outline-slate-400 rounded-md",name:"usageLimit",value:s.usageLimit||"",onChange:u}),(0,a.jsxs)("label",{children:[(0,a.jsx)("p",{className:"mt-3",children:"Valid From (Optional)"}),(0,a.jsx)("input",{type:"date",className:"w-full mt-1 p-2 border border-slate-200 outline-slate-400 rounded-md",name:"validFrom",value:s.validFrom?(0,l.GP)(new Date(s.validFrom),"yyyy-MM-dd"):"",onChange:u})]}),(0,a.jsxs)("label",{children:[(0,a.jsx)("p",{className:"mt-3",children:"Valid Until"}),(0,a.jsx)("input",{type:"date",className:"w-full mt-1 p-2 border border-slate-200 outline-slate-400 rounded-md",name:"validUntil",value:s.validUntil?(0,l.GP)(new Date(s.validUntil),"yyyy-MM-dd"):"",onChange:u,required:!0})]}),(0,a.jsx)("div",{className:"mt-5",children:(0,a.jsxs)("div",{className:"flex gap-2 mt-3",children:[(0,a.jsxs)("label",{className:"relative inline-flex items-center cursor-pointer text-gray-900 gap-3",children:[(0,a.jsx)("input",{type:"checkbox",className:"sr-only peer",name:"isActive",checked:s.isActive,onChange:u}),(0,a.jsx)("div",{className:"w-11 h-6 bg-slate-300 rounded-full peer peer-checked:bg-green-600 transition-colors duration-200"}),(0,a.jsx)("span",{className:"dot absolute left-1 top-1 w-4 h-4 bg-white rounded-full transition-transform duration-200 ease-in-out peer-checked:translate-x-5"})]}),(0,a.jsx)("p",{children:"Is Active"})]})}),(0,a.jsx)("button",{className:"mt-4 p-2 px-10 rounded bg-slate-700 text-white active:scale-95 transition",children:"Add Coupon"})]}),(0,a.jsxs)("div",{className:"mt-14",children:[(0,a.jsxs)("h2",{className:"text-2xl",children:["List ",(0,a.jsx)("span",{className:"text-slate-800 font-medium",children:"Coupons"})]}),(0,a.jsx)("div",{className:"overflow-x-auto mt-4 rounded-lg border border-slate-200 max-w-6xl",children:(0,a.jsxs)("table",{className:"min-w-full bg-white text-sm",children:[(0,a.jsx)("thead",{className:"bg-slate-50",children:(0,a.jsxs)("tr",{children:[(0,a.jsx)("th",{className:"py-3 px-4 text-left font-semibold text-slate-600",children:"Code"}),(0,a.jsx)("th",{className:"py-3 px-4 text-left font-semibold text-slate-600",children:"Description"}),(0,a.jsx)("th",{className:"py-3 px-4 text-left font-semibold text-slate-600",children:"Discount"}),(0,a.jsx)("th",{className:"py-3 px-4 text-left font-semibold text-slate-600",children:"Min Order"}),(0,a.jsx)("th",{className:"py-3 px-4 text-left font-semibold text-slate-600",children:"Usage"}),(0,a.jsx)("th",{className:"py-3 px-4 text-left font-semibold text-slate-600",children:"Valid Until"}),(0,a.jsx)("th",{className:"py-3 px-4 text-left font-semibold text-slate-600",children:"Status"}),(0,a.jsx)("th",{className:"py-3 px-4 text-left font-semibold text-slate-600",children:"Action"})]})}),(0,a.jsx)("tbody",{className:"divide-y divide-slate-200",children:e.map(e=>(0,a.jsxs)("tr",{className:"hover:bg-slate-50",children:[(0,a.jsx)("td",{className:"py-3 px-4 font-medium text-slate-800",children:e.code}),(0,a.jsx)("td",{className:"py-3 px-4 text-slate-800",children:e.description}),(0,a.jsx)("td",{className:"py-3 px-4 text-slate-800",children:"percent"===e.discountType?`${e.discountValue}%`:`$${e.discountValue}`}),(0,a.jsxs)("td",{className:"py-3 px-4 text-slate-800",children:["$",e.minOrderTotal]}),(0,a.jsxs)("td",{className:"py-3 px-4 text-slate-800",children:[e.usedCount||0,e.usageLimit?`/${e.usageLimit}`:""]}),(0,a.jsx)("td",{className:"py-3 px-4 text-slate-800",children:e.validUntil?(0,l.GP)(new Date(e.validUntil),"yyyy-MM-dd"):"No expiry"}),(0,a.jsx)("td",{className:"py-3 px-4 text-slate-800",children:(0,a.jsx)("span",{className:`px-2 py-1 rounded text-xs ${e.isActive?"bg-green-100 text-green-700":"bg-red-100 text-red-700"}`,children:e.isActive?"Active":"Inactive"})}),(0,a.jsx)("td",{className:"py-3 px-4 text-slate-800",children:(0,a.jsx)(n,{onClick:()=>o.Ay.promise(p(e.code),{loading:"Deleting coupon..."}),className:"w-5 h-5 text-red-500 hover:text-red-800 cursor-pointer"})})]},e._id))})]})})]})]})}},63033:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-unit-async-storage.external.js")},63143:(e,t,s)=>{"use strict";s.d(t,{A:()=>a});let a=(0,s(62688).A)("square-pen",[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]])},64797:(e,t,s)=>{"use strict";s.r(t),s.d(t,{GlobalError:()=>o.a,__next_app__:()=>u,pages:()=>c,routeModule:()=>p,tree:()=>d});var a=s(65239),r=s(48088),l=s(88170),o=s.n(l),n=s(30893),i={};for(let e in n)0>["default","tree","pages","GlobalError","__next_app__","routeModule"].indexOf(e)&&(i[e]=()=>n[e]);s.d(t,i);let d={children:["",{children:["store",{children:["coupons",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(s.bind(s,98801)),"C:\\Users\\RextonItsiah\\Documents\\GitHub\\qwesi-home\\app\\store\\coupons\\page.jsx"]}]},{}]},{layout:[()=>Promise.resolve().then(s.bind(s,18406)),"C:\\Users\\RextonItsiah\\Documents\\GitHub\\qwesi-home\\app\\store\\layout.jsx"],metadata:{icon:[async e=>(await Promise.resolve().then(s.bind(s,46055))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}]},{layout:[()=>Promise.resolve().then(s.bind(s,47824)),"C:\\Users\\RextonItsiah\\Documents\\GitHub\\qwesi-home\\app\\layout.jsx"],"not-found":[()=>Promise.resolve().then(s.t.bind(s,57398,23)),"next/dist/client/components/not-found-error"],forbidden:[()=>Promise.resolve().then(s.t.bind(s,89999,23)),"next/dist/client/components/forbidden-error"],unauthorized:[()=>Promise.resolve().then(s.t.bind(s,65284,23)),"next/dist/client/components/unauthorized-error"],metadata:{icon:[async e=>(await Promise.resolve().then(s.bind(s,46055))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}]}.children,c=["C:\\Users\\RextonItsiah\\Documents\\GitHub\\qwesi-home\\app\\store\\coupons\\page.jsx"],u={require:s,loadChunk:()=>Promise.resolve()},p=new a.AppPageRouteModule({definition:{kind:r.RouteKind.APP_PAGE,page:"/store/coupons/page",pathname:"/store/coupons",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:d}})},65764:(e,t,s)=>{"use strict";s.d(t,{default:()=>a});let a=(0,s(12907).registerClientReference)(function(){throw Error("Attempted to call the default export of \"C:\\\\Users\\\\RextonItsiah\\\\Documents\\\\GitHub\\\\qwesi-home\\\\components\\\\store\\\\StoreLayout.jsx\" from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"C:\\Users\\RextonItsiah\\Documents\\GitHub\\qwesi-home\\components\\store\\StoreLayout.jsx","default")},79551:e=>{"use strict";e.exports=require("url")},88003:(e,t,s)=>{"use strict";s.d(t,{default:()=>j});var a=s(60687),r=s(43210),l=s(6282),o=s(85814),n=s.n(o),i=s(70334),d=s(63296),c=s(16189),u=s(32192),p=s(62688);let m=(0,p.A)("ticket-percent",[["path",{d:"M2 9a3 3 0 1 1 0 6v2a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2v-2a3 3 0 1 1 0-6V7a2 2 0 0 0-2-2H4a2 2 0 0 0-2 2Z",key:"1l48ns"}],["path",{d:"M9 9h.01",key:"1q5me6"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"M15 15h.01",key:"lqbp3k"}]]),h=(0,p.A)("square-plus",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M8 12h8",key:"1wcyev"}],["path",{d:"M12 8v8",key:"napkw2"}]]);var x=s(63143);let f=(0,p.A)("layout-list",[["rect",{width:"7",height:"7",x:"3",y:"3",rx:"1",key:"1g98yp"}],["rect",{width:"7",height:"7",x:"3",y:"14",rx:"1",key:"1bb6yr"}],["path",{d:"M14 4h7",key:"3xa0d5"}],["path",{d:"M14 9h7",key:"1icrd9"}],["path",{d:"M14 15h7",key:"1mj8o2"}],["path",{d:"M14 20h7",key:"11slyb"}]]);var y=s(30474);let v=({storeInfo:e})=>{let t=(0,c.usePathname)(),s=[{name:"Dashboard",href:"/store",icon:u.A},{name:"Coupons",href:"/store/coupons",icon:m},{name:"Add Product",href:"/store/add-product",icon:h},{name:"Manage Product",href:"/store/manage-product",icon:x.A},{name:"Orders",href:"/store/orders",icon:f}];return(0,a.jsxs)("div",{className:"inline-flex h-full flex-col gap-5 border-r border-slate-200 sm:min-w-60",children:[(0,a.jsxs)("div",{className:"flex flex-col gap-3 justify-center items-center pt-8 max-sm:hidden",children:[e?.logo&&"string"==typeof e.logo&&e.logo.trim()&&(0,a.jsx)(y.default,{className:"w-14 h-14 rounded-full shadow-md",src:e.logo,alt:"",width:80,height:80}),(0,a.jsx)("p",{className:"text-slate-700",children:e?.name||"Your Store"})]}),(0,a.jsx)("div",{className:"max-sm:mt-6",children:s.map((e,s)=>(0,a.jsxs)(n(),{href:e.href,className:`relative flex items-center gap-3 text-slate-500 hover:bg-slate-50 p-2.5 transition ${t===e.href&&"bg-slate-100 sm:text-slate-600"}`,children:[(0,a.jsx)(e.icon,{size:18,className:"sm:ml-5"}),(0,a.jsx)("p",{className:"max-sm:hidden",children:e.name}),t===e.href&&(0,a.jsx)("span",{className:"absolute bg-green-500 right-0 top-1.5 bottom-1.5 w-1 sm:w-1.5 rounded-l"})]},s))})]})};var b=s(2546);let j=({children:e})=>{let[t,s]=(0,r.useState)(!1),[o,c]=(0,r.useState)(!0),[u,p]=(0,r.useState)(null);return(0,r.useEffect)(()=>{(async()=>{let e=(0,b.Hc)();if(!e?.user||!(await (0,b.PX)()).valid){s(!1),c(!1);return}s(!0),p(null),c(!1)})()},[]),o?(0,a.jsx)(l.A,{}):t?(0,a.jsxs)("div",{className:"flex flex-col h-screen",children:[(0,a.jsx)(d.A,{}),(0,a.jsxs)("div",{className:"flex flex-1 items-start h-full overflow-y-scroll no-scrollbar",children:[(0,a.jsx)(v,{storeInfo:u}),(0,a.jsx)("div",{className:"flex-1 h-full p-5 lg:pl-12 lg:pt-12 overflow-y-scroll",children:e})]})]}):(0,a.jsxs)("div",{className:"min-h-screen flex flex-col items-center justify-center text-center px-6",children:[(0,a.jsx)("h1",{className:"text-2xl sm:text-4xl font-semibold text-slate-400",children:"You are not authorized to access this page"}),(0,a.jsxs)(n(),{href:"/",className:"bg-slate-700 text-white flex items-center gap-2 mt-8 p-2 px-6 max-sm:text-sm rounded-full",children:["Go to home ",(0,a.jsx)(i.A,{size:18})]})]})}},98801:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>a});let a=(0,s(12907).registerClientReference)(function(){throw Error("Attempted to call the default export of \"C:\\\\Users\\\\RextonItsiah\\\\Documents\\\\GitHub\\\\qwesi-home\\\\app\\\\store\\\\coupons\\\\page.jsx\" from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"C:\\Users\\RextonItsiah\\Documents\\GitHub\\qwesi-home\\app\\store\\coupons\\page.jsx","default")}};var t=require("../../../webpack-runtime.js");t.C(e);var s=e=>t(t.s=e),a=t.X(0,[447,732,389,814,451],()=>s(64797));module.exports=a})();