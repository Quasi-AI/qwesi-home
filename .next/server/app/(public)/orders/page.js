(()=>{var e={};e.id=353,e.ids=[353],e.modules={3295:e=>{"use strict";e.exports=require("next/dist/server/app-render/after-task-async-storage.external.js")},6282:(e,t,s)=>{"use strict";s.d(t,{A:()=>a});var r=s(60687);let a=()=>(0,r.jsx)("div",{className:"flex items-center justify-center h-screen",children:(0,r.jsx)("div",{className:"w-11 h-11 rounded-full border-3 border-gray-300 border-t-green-500 animate-spin"})})},10846:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},19121:e=>{"use strict";e.exports=require("next/dist/server/app-render/action-async-storage.external.js")},29294:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-async-storage.external.js")},33873:e=>{"use strict";e.exports=require("path")},49333:(e,t,s)=>{"use strict";s.r(t),s.d(t,{GlobalError:()=>l.a,__next_app__:()=>x,pages:()=>c,routeModule:()=>m,tree:()=>o});var r=s(65239),a=s(48088),i=s(88170),l=s.n(i),n=s(30893),d={};for(let e in n)0>["default","tree","pages","GlobalError","__next_app__","routeModule"].indexOf(e)&&(d[e]=()=>n[e]);s.d(t,d);let o={children:["",{children:["(public)",{children:["orders",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(s.bind(s,98512)),"C:\\Users\\RextonItsiah\\Documents\\GitHub\\qwesi-home\\app\\(public)\\orders\\page.jsx"]}]},{}]},{layout:[()=>Promise.resolve().then(s.bind(s,43309)),"C:\\Users\\RextonItsiah\\Documents\\GitHub\\qwesi-home\\app\\(public)\\layout.jsx"],"not-found":[()=>Promise.resolve().then(s.t.bind(s,57398,23)),"next/dist/client/components/not-found-error"],forbidden:[()=>Promise.resolve().then(s.t.bind(s,89999,23)),"next/dist/client/components/forbidden-error"],unauthorized:[()=>Promise.resolve().then(s.t.bind(s,65284,23)),"next/dist/client/components/unauthorized-error"],metadata:{icon:[async e=>(await Promise.resolve().then(s.bind(s,46055))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}]},{layout:[()=>Promise.resolve().then(s.bind(s,47824)),"C:\\Users\\RextonItsiah\\Documents\\GitHub\\qwesi-home\\app\\layout.jsx"],"not-found":[()=>Promise.resolve().then(s.t.bind(s,57398,23)),"next/dist/client/components/not-found-error"],forbidden:[()=>Promise.resolve().then(s.t.bind(s,89999,23)),"next/dist/client/components/forbidden-error"],unauthorized:[()=>Promise.resolve().then(s.t.bind(s,65284,23)),"next/dist/client/components/unauthorized-error"],metadata:{icon:[async e=>(await Promise.resolve().then(s.bind(s,46055))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}]}.children,c=["C:\\Users\\RextonItsiah\\Documents\\GitHub\\qwesi-home\\app\\(public)\\orders\\page.jsx"],x={require:s,loadChunk:()=>Promise.resolve()},m=new r.AppPageRouteModule({definition:{kind:a.RouteKind.APP_PAGE,page:"/(public)/orders/page",pathname:"/orders",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:o}})},55564:(e,t,s)=>{"use strict";s.d(t,{A:()=>n});var r=s(60687),a=s(70334),i=s(85814),l=s.n(i);let n=({heading:e,text:t,path:s="/",linkText:i})=>(0,r.jsxs)("div",{className:"my-6",children:[(0,r.jsx)("h2",{className:"text-2xl font-semibold",children:e}),(0,r.jsxs)("div",{className:"flex items-center gap-3",children:[(0,r.jsx)("p",{className:"text-slate-600",children:t}),(0,r.jsxs)(l(),{href:s,className:"flex items-center gap-1 text-green-500 text-sm",children:[i," ",(0,r.jsx)(a.A,{size:14})]})]})]})},63033:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-unit-async-storage.external.js")},64398:(e,t,s)=>{"use strict";s.d(t,{A:()=>r});let r=(0,s(62688).A)("star",[["path",{d:"M11.525 2.295a.53.53 0 0 1 .95 0l2.31 4.679a2.123 2.123 0 0 0 1.595 1.16l5.166.756a.53.53 0 0 1 .294.904l-3.736 3.638a2.123 2.123 0 0 0-.611 1.878l.882 5.14a.53.53 0 0 1-.771.56l-4.618-2.428a2.122 2.122 0 0 0-1.973 0L6.396 21.01a.53.53 0 0 1-.77-.56l.881-5.139a2.122 2.122 0 0 0-.611-1.879L2.16 9.795a.53.53 0 0 1 .294-.906l5.165-.755a2.122 2.122 0 0 0 1.597-1.16z",key:"r04s7s"}]])},64636:(e,t,s)=>{Promise.resolve().then(s.bind(s,85808))},78204:(e,t,s)=>{Promise.resolve().then(s.bind(s,98512))},79551:e=>{"use strict";e.exports=require("url")},85808:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>j});var r=s(60687),a=s(55564),i=s(43210),l=s(30474);let n=(0,s(62688).A)("dot",[["circle",{cx:"12.1",cy:"12.1",r:"1",key:"18d7e5"}]]);var d=s(54864),o=s(64398);let c=({value:e=0,maxRating:t=5,size:s=4,showValue:a=!1,reviewCount:i=null,interactive:l=!1,onChange:n=null,className:d="",emptyColor:c="text-gray-300",fillColor:x="text-yellow-400"})=>{let m=e=>{l&&n&&n(e)},u=t=>{let r="sm"===s?"size-3":"lg"===s?"size-6":"xl"===s?"size-8":`size-${s}`;return`shrink-0 fill-current transition-colors ${r} ${e>t?x:c} ${l?"cursor-pointer hover:scale-110 transition-transform":""}`},h="number"==typeof e?e:0,p=Math.round(2*h)/2;return(0,r.jsxs)("div",{className:`flex items-center gap-1 ${d}`,children:[(0,r.jsx)("div",{className:"flex items-center",children:Array.from({length:t},(e,t)=>{let a=t+1;return(0,r.jsxs)("div",{className:"relative",onClick:()=>m(a),children:[(0,r.jsx)(o.A,{className:u(t)}),p>=a-.5&&p<a&&(0,r.jsx)("div",{className:"absolute inset-0 overflow-hidden",style:{width:"50%"},children:(0,r.jsx)(o.A,{className:`shrink-0 fill-current ${"sm"===s?"size-3":"lg"===s?"size-6":"xl"===s?"size-8":`size-${s}`} ${x}`})})]},t)})}),a&&(0,r.jsx)("span",{className:"text-sm font-medium text-gray-600 ml-1",children:h>0?h.toFixed(1):"0.0"}),null!==i&&i>=0&&(0,r.jsxs)("span",{className:"text-sm text-gray-500 ml-1",children:["(",i," ",1===i?"review":"reviews",")"]})]})};c.calculateAverage=(e=[])=>Array.isArray(e)&&0!==e.length?e.reduce((e,t)=>e+(t.rating||0),0)/e.length:0,c.getDistribution=(e=[])=>{let t={1:0,2:0,3:0,4:0,5:0};return e.forEach(e=>{let s=e.rating||0;s>=1&&s<=5&&t[Math.round(s)]++}),t};var x=s(11860),m=s(37590);let u=({ratingModal:e,setRatingModal:t,onRatingSubmitted:s})=>{let[a,l]=(0,i.useState)(0),[n,d]=(0,i.useState)(""),[c,u]=(0,i.useState)(""),[h,p]=(0,i.useState)(!1),g=e?.productId||e?.id,b=e?.name||"this product",j=async()=>{if(a<1||a>5)return void m.Ay.error("Please select a rating between 1-5 stars");if(!g)return void m.Ay.error("Product information missing");try{p(!0);let e={rating:a,comment:n.trim()||void 0,reviewerName:c.trim()||void 0},r=await fetch(`https://dark-caldron-448714-u5.uc.r.appspot.com/api/products/${g}/rating`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});if(r.ok){let e=await r.json();if(e.success)m.Ay.success("Rating submitted successfully!"),s&&"function"==typeof s&&s(e.data),l(0),d(""),u(""),t(null);else throw Error(e.message||"Failed to submit rating")}else{let e=await r.json().catch(()=>({}));throw Error(e.message||`HTTP ${r.status}: Failed to submit rating`)}}catch(e){console.error("Error submitting rating:",e),m.Ay.error(e.message||"Failed to submit rating. Please try again.")}finally{p(!1)}},f=()=>{h||(l(0),d(""),u(""),t(null))};return e?(0,r.jsx)("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/50 backdrop-blur-sm",children:(0,r.jsxs)("div",{className:"bg-white p-8 rounded-lg shadow-xl w-96 relative max-h-[90vh] overflow-y-auto",children:[(0,r.jsx)("button",{onClick:f,className:"absolute top-3 right-3 text-gray-500 hover:text-gray-700 transition-colors disabled:opacity-50",disabled:h,children:(0,r.jsx)(x.A,{size:20})}),(0,r.jsx)("h2",{className:"text-xl font-semibold text-slate-800 mb-2",children:"Rate Product"}),(0,r.jsxs)("p",{className:"text-sm text-slate-600 mb-6",children:["Share your experience with ",b]}),(0,r.jsxs)("div",{className:"mb-4",children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"Your Name (Optional)"}),(0,r.jsx)("input",{type:"text",value:c,onChange:e=>u(e.target.value),placeholder:"Enter your name",className:"w-full p-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-green-400 focus:border-transparent transition-all",disabled:h})]}),(0,r.jsxs)("div",{className:"mb-4",children:[(0,r.jsxs)("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:["Rating ",(0,r.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,r.jsx)("div",{className:"flex items-center justify-center mb-2",children:Array.from({length:5},(e,t)=>(0,r.jsx)(o.A,{className:`size-8 cursor-pointer transition-all hover:scale-110 ${a>t?"text-yellow-400 fill-current":"text-gray-300 hover:text-yellow-200"} ${h?"cursor-not-allowed opacity-50":""}`,onClick:()=>!h&&l(t+1)},t))}),(0,r.jsxs)("p",{className:"text-center text-sm text-slate-500",children:[0===a&&"Click stars to rate",1===a&&"⭐ Poor",2===a&&"⭐⭐ Fair",3===a&&"⭐⭐⭐ Good",4===a&&"⭐⭐⭐⭐ Very Good",5===a&&"⭐⭐⭐⭐⭐ Excellent"]})]}),(0,r.jsxs)("div",{className:"mb-6",children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"Review (Optional)"}),(0,r.jsx)("textarea",{className:"w-full p-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-green-400 focus:border-transparent resize-none transition-all",placeholder:"Share your thoughts about this product...",rows:"4",value:n,onChange:e=>d(e.target.value),disabled:h,maxLength:500}),(0,r.jsxs)("p",{className:"text-xs text-slate-500 mt-1",children:[n.length,"/500 characters"]})]}),(0,r.jsxs)("div",{className:"flex gap-3",children:[(0,r.jsx)("button",{onClick:()=>!h&&m.Ay.promise(j(),{loading:"Submitting rating...",success:"Rating submitted!",error:"Failed to submit rating"}),className:"flex-1 bg-green-500 text-white py-3 rounded-lg hover:bg-green-600 transition-colors disabled:opacity-50 disabled:cursor-not-allowed font-medium",disabled:h||0===a,children:h?"Submitting...":"Submit Rating"}),(0,r.jsx)("button",{onClick:f,className:"px-4 py-3 text-gray-600 hover:text-gray-800 transition-colors disabled:opacity-50",disabled:h,children:"Cancel"})]}),(0,r.jsx)("p",{className:"text-xs text-slate-500 text-center mt-4",children:"Your review will help other customers make informed decisions"})]})}):null};var h=s(44867);let p=({order:e})=>{let t=process.env.NEXT_PUBLIC_CURRENCY_SYMBOL||"$",[s,a]=(0,i.useState)(null),{ratings:o}=(0,d.d4)(e=>e.rating);return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)("tr",{className:"text-sm",children:[(0,r.jsx)("td",{className:"text-left",children:(0,r.jsx)("div",{className:"flex flex-col gap-6",children:e.orderItems.map((i,n)=>(0,r.jsxs)("div",{className:"flex items-center gap-4",children:[(0,r.jsx)("div",{className:"w-20 aspect-square bg-slate-100 flex items-center justify-center rounded-md",children:(0,r.jsx)(l.default,{className:"h-14 w-auto",src:i.product.images?.[0]||"/logo.png",alt:"product_img",width:50,height:50})}),(0,r.jsxs)("div",{className:"flex flex-col justify-center text-sm",children:[(0,r.jsx)("p",{className:"font-medium text-slate-600 text-base",children:i.product.name}),(0,r.jsxs)("p",{children:[t,i.price," Qty : ",i.quantity," "]}),(0,r.jsx)("p",{className:"mb-1",children:e.createdAt?(0,h.GP)(new Date(e.createdAt),"PP"):"Unknown"}),(0,r.jsx)("div",{children:o.find(t=>e.id===t.orderId&&i.product.id===t.productId)?(0,r.jsx)(c,{value:o.find(t=>e.id===t.orderId&&i.product.id===t.productId).rating}):(0,r.jsx)("button",{onClick:()=>a({orderId:e.id,productId:i.product.id}),className:`text-green-500 hover:bg-green-50 transition ${"DELIVERED"!==e.status&&"hidden"}`,children:"Rate Product"})}),s&&(0,r.jsx)(u,{ratingModal:s,setRatingModal:a})]})]},n))})}),(0,r.jsxs)("td",{className:"text-center max-md:hidden",children:[t,e.totalPrice]}),(0,r.jsxs)("td",{className:"text-left max-md:hidden",children:[(0,r.jsxs)("p",{children:[e.address?.name||"N/A",", ",e.address?.street||"",","]}),(0,r.jsxs)("p",{children:[e.address?.city||"",", ",e.address?.state||"",", ",e.address?.zip||"",", ",e.address?.country||"",","]}),(0,r.jsx)("p",{children:e.address?.phone||"N/A"})]}),(0,r.jsx)("td",{className:"text-left space-y-2 text-sm max-md:hidden",children:(0,r.jsxs)("div",{className:`flex items-center justify-center gap-1 rounded-full p-1 ${"confirmed"===e.status?"text-yellow-500 bg-yellow-100":"delivered"===e.status?"text-green-500 bg-green-100":"text-slate-500 bg-slate-100"}`,children:[(0,r.jsx)(n,{size:10,className:"scale-250"}),e.status.split("_").join(" ").toLowerCase()]})})]}),(0,r.jsx)("tr",{className:"md:hidden",children:(0,r.jsxs)("td",{colSpan:5,children:[(0,r.jsxs)("p",{children:[e.address?.name||"N/A",", ",e.address?.street||""]}),(0,r.jsxs)("p",{children:[e.address?.city||"",", ",e.address?.state||"",", ",e.address?.zip||"",", ",e.address?.country||""]}),(0,r.jsx)("p",{children:e.address?.phone||"N/A"}),(0,r.jsx)("br",{}),(0,r.jsx)("div",{className:"flex items-center",children:(0,r.jsx)("span",{className:"text-center mx-auto px-6 py-1.5 rounded bg-green-100 text-green-700",children:e.status.replace(/_/g," ").toLowerCase()})})]})}),(0,r.jsx)("tr",{children:(0,r.jsx)("td",{colSpan:4,children:(0,r.jsx)("div",{className:"border-b border-slate-300 w-6/7 mx-auto"})})})]})};var g=s(57670),b=s(6282);function j(){let{user:e,initAuth:t}=(0,g.n)(),[s,l]=(0,i.useState)(null),[n,d]=(0,i.useState)(!1);return(e?.id?e.id:e?._id?e._id:e?.uid?e.uid:e?.userId&&e.userId,n)?(0,r.jsx)(b.A,{}):(0,r.jsx)("div",{className:"min-h-[70vh] mx-6",children:s&&s.length>0?(0,r.jsxs)("div",{className:"my-20 max-w-7xl mx-auto",children:[(0,r.jsx)(a.A,{heading:"My Orders",text:`Showing total ${s.length} orders`,linkText:"Go to home"}),(0,r.jsxs)("table",{className:"w-full max-w-5xl text-slate-500 table-auto border-separate border-spacing-y-12 border-spacing-x-4",children:[(0,r.jsx)("thead",{children:(0,r.jsxs)("tr",{className:"max-sm:text-sm text-slate-600 max-md:hidden",children:[(0,r.jsx)("th",{className:"text-left",children:"Product"}),(0,r.jsx)("th",{className:"text-center",children:"Total Price"}),(0,r.jsx)("th",{className:"text-left",children:"Address"}),(0,r.jsx)("th",{className:"text-left",children:"Status"})]})}),(0,r.jsx)("tbody",{children:s.map(e=>(0,r.jsx)(p,{order:e},e._id))})]})]}):(0,r.jsx)("div",{className:"min-h-[80vh] mx-6 flex items-center justify-center",children:(0,r.jsxs)("div",{children:[(0,r.jsx)("h1",{className:"text-2xl sm:text-4xl font-semibold text-slate-400 mb-2",children:"You have no orders"}),(0,r.jsx)("p",{className:"text-slate-600",children:"All your orders will show up here"})]})})})}s(2546)},98512:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>r});let r=(0,s(12907).registerClientReference)(function(){throw Error("Attempted to call the default export of \"C:\\\\Users\\\\RextonItsiah\\\\Documents\\\\GitHub\\\\qwesi-home\\\\app\\\\(public)\\\\orders\\\\page.jsx\" from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"C:\\Users\\RextonItsiah\\Documents\\GitHub\\qwesi-home\\app\\(public)\\orders\\page.jsx","default")}};var t=require("../../../webpack-runtime.js");t.C(e);var s=e=>t(t.s=e),r=t.X(0,[447,732,885,496,814,229,515,765],()=>s(49333));module.exports=r})();